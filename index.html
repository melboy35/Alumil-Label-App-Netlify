<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Alumil Inventory System</title>
<!-- Comprehensive Favicon Setup -->
<link href="/favicon.ico?v=6" rel="icon" type="image/x-icon"/>
<link href="/favicon.ico?v=6" rel="shortcut icon" type="image/x-icon"/>
<link href="/favicon.svg?v=6" rel="icon" type="image/svg+xml"/>
<link href="/favicon/favicon-32x32.png?v=6" rel="icon" sizes="32x32" type="image/png"/>
<link href="/favicon/favicon-16x16.png?v=6" rel="icon" sizes="16x16" type="image/png"/>
<link href="/favicon/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"/>
<link href="/favicon/site.webmanifest" rel="manifest"/>
<link color="#ffc107" href="/favicon/safari-pinned-tab.svg" rel="mask-icon"/>
<meta content="#ffc107" name="msapplication-TileColor"/>
<meta content="/favicon/browserconfig.xml" name="msapplication-config"/>
<meta content="#ffffff" name="theme-color"/>
<link href="assets/css/logo-theme.css" rel="stylesheet"/>
<!-- Brand CSS removed -->
<!-- Footer Styles -->
<style>
        .alumil-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            padding: 12px 0;
            text-align: center;
            font-size: 12px;
            color: #666;
            z-index: 1000;
            font-family: Inter, system-ui, sans-serif;
        }
        }
        
        [data-theme="dark"] .alumil-footer {
            background: rgba(31, 41, 55, 0.95);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #9ca3af;
        }
        
        .alumil-footer p {
            margin: 0;
            font-weight: 500;
        }
    </style>
<script>
        // Immediate redirect to login page
        window.location.href = '/login.html';
    </script>
<style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: white;
        }
        .loading {
            text-align: center;
        }
        .spinner {
            border: 2px solid #f3f3f3;
            border-top: 2px solid #ffc107;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
<div class="loading">
<div class="spinner"></div>
<div class="logo-container">
<img alt="Alumil Logo" loading="eager" src="assets/images/alumil-logo.svg"/>
</div>
<h2>Alumil Inventory System</h2>
<p>Redirecting to login...</p>
<p><a href="/login.html" style="color: #ffc107;">Click here if not redirected automatically</a></p>
</div>
<!-- Footer -->
<footer class="alumil-footer">
<p>Alumil Labeling App @2025</p>
</footer>

<!-- Supabase v2 -->
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script>
  window.SUPABASE_URL = "https://gkptehearoiapyujkuvc.supabase.co";
  window.SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdrcHRlaGVhcm9pYXB5dWprdXZjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU3ODgyMjgsImV4cCI6MjA3MTM2NDIyOH0.5F_dZECmQHGj7r8wsekm_pria4T6tVxnac_IA1qDvdQ";
  window.ORG_ID = "00000000-0000-0000-0000-000000000000";
  window._sbClient = window.supabase.createClient(window.SUPABASE_URL, window.SUPABASE_KEY);
</script>

<!-- Live Data: consumer fetch + realtime -->
<script>
(function(){
  const sb = window._sbClient, ORG = window.ORG_ID;
  async function fetchLiveData(){
    try{
      const [{ data:profiles, error:pe }, { data:accessories, error:ae }] = await Promise.all([
        sb.from('profiles').select('*').eq('org_id', ORG),
        sb.from('accessories').select('*').eq('org_id', ORG)
      ]);
      if(pe) throw pe; if(ae) throw ae;
      const data = { profiles: profiles||[], accessories: accessories||[], loadedAt: new Date().toISOString() };
      try { localStorage.setItem('excelCache', JSON.stringify(data)); } catch {}
      if (typeof window.onDataLoaded === 'function') window.onDataLoaded(data);
      return data;
    }catch(err){
      try { return JSON.parse(localStorage.getItem('excelCache') || '{}'); }
      catch { return { profiles:[], accessories:[] }; }
    }
  }
  document.addEventListener('DOMContentLoaded', fetchLiveData);
  sb.channel('version-bumps')
    .on('postgres_changes', { event:'INSERT', schema:'public', table:'dataset_versions' }, async (payload)=>{
      if (payload?.new?.org_id === ORG) await fetchLiveData();
    })
    .subscribe();
  // expose for pages that want it
  window.fetchLiveData = fetchLiveData;
})();
</script>
</body>
</html>